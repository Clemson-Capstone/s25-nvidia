Bootstrap: docker
From: nvcr.io/nvidia/pytorch:24.02-py3

%files
    requirements.txt /opt/envs/requirements.txt
    pip_requirements.txt /opt/envs/pip_requirements.txt

%post
    export apex_commit=810ffae374a2b9cb4b5c5e28eaeca7d7998fca0c
    export te_commit=bfe21c3d68b0a9951e5716fb520045db53419c5e
    export mcore_commit=02871b4df8c69fac687ab6676c4246e936ce92d0
    export nv_pytorch_tag=24.02-py3
    
    apt-get update && apt-get install -y libsndfile1 ffmpeg
    pip install Cython packaging
    
    pip install -r /opt/envs/pip_requirements.txt
    python -m pip install nemo_toolkit['all']

    pip install packaging
    
    pip install huggingface-hub==0.23.2
    pip install transformers==4.40.0
    pip install nemoguardrails==0.10.1
    
    pip install -r /opt/envs/requirements.txt

